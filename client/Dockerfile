FROM node:20.8.0

WORKDIR /app

ARG JWT_KEY
ARG NEXT_PUBLIC_APIKEY
ARG NEXT_PUBLIC_AUTHDOMAIN
 
ENV JWT_KEY=$JWT_KEY
ENV NEXT_PUBLIC_APIKEY=${NEXT_PUBLIC_APIKEY}
ENV NEXT_PUBLIC_AUTHDOMAIN=${NEXT_PUBLIC_AUTHDOMAIN}

COPY package*.json ./

RUN npm install

COPY . .

RUN npm run build

EXPOSE 3000

CMD ["npm", "start"]
